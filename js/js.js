function gestionarXml(e){xmlDoc=e.responseXML;var t=xmlDoc.getElementsByTagName("title")[0].innerHTML;ponerDatosInputHtml(t),respCorrecta=xmlDoc.getElementsByTagName("answer")[0].innerHTML;var n=xmlDoc.getElementsByTagName("title")[1].innerHTML,a="/questions/question[@id='jklm_002']/option",r=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosSelectHtml(n,r),respuestaSelect=parseInt(xmlDoc.getElementsByTagName("answer")[1].innerHTML);var o=xmlDoc.getElementsByTagName("title")[2].innerHTML,a="/questions/question[@id='jklm_003']/option",l=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosCheckboxHtml(o,l);var s=xmlDoc.getElementById("jklm_003").getElementsByTagName("answer").length;for(i=0;i<s;i++)respuestasCheckbox[i]=xmlDoc.getElementById("jklm_003").getElementsByTagName("answer")[i].innerHTML;var m=xmlDoc.getElementsByTagName("title")[3].innerHTML,a="/questions/question[@id='jklm_004']/option",c=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosRadioHtml(m,c);var s=xmlDoc.getElementById("jklm_004").getElementsByTagName("answer").length;for(i=0;i<s;i++)respuestaRadio[i]=xmlDoc.getElementById("jklm_004").getElementsByTagName("answer")[i].innerHTML;var u=xmlDoc.getElementsByTagName("title")[4].innerHTML,a="/questions/question[@id='jklm_005']/option",d=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosMultipleHtml(u,d);var s=xmlDoc.getElementById("jklm_005").getElementsByTagName("answer").length;for(i=0;i<s;i++)respuestasMultiple[i]=xmlDoc.getElementById("jklm_005").getElementsByTagName("answer")[i].innerHTML;var p=xmlDoc.getElementsByTagName("title")[5].innerHTML,a="/questions/question[@id='jklm_006']/option",g=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosRadioHtml1(p,g);var s=xmlDoc.getElementById("jklm_006").getElementsByTagName("answer").length;for(i=0;i<s;i++)respuestaRadio1[i]=xmlDoc.getElementById("jklm_006").getElementsByTagName("answer")[i].innerHTML;var h=xmlDoc.getElementsByTagName("title")[6].innerHTML,a="/questions/question[@id='jklm_007']/option",x=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosRadioHtml2(h,x);var s=xmlDoc.getElementById("jklm_007").getElementsByTagName("answer").length;for(i=0;i<s;i++)respuestaRadio2[i]=xmlDoc.getElementById("jklm_007").getElementsByTagName("answer")[i].innerHTML;var E=xmlDoc.getElementsByTagName("title")[7].innerHTML;ponerDatosInputHtml1(E),respCorrecta1=xmlDoc.getElementsByTagName("answer")[8].innerHTML;var T=xmlDoc.getElementsByTagName("title")[8].innerHTML;ponerDatosInputHtml2(T),respCorrecta2=xmlDoc.getElementsByTagName("answer")[9].innerHTML;var H=xmlDoc.getElementsByTagName("title")[9].innerHTML,a="/questions/question[@id='jklm_010']/option",D=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosMultipleHtml1(H,D);var s=xmlDoc.getElementById("jklm_010").getElementsByTagName("answer").length;for(i=0;i<s;i++)respuestasMultiple1[i]=xmlDoc.getElementById("jklm_010").getElementsByTagName("answer")[i].innerHTML;var f=xmlDoc.getElementsByTagName("title")[10].innerHTML,a="/questions/question[@id='jklm_011']/option",v=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosCheckboxHtml1(f,v);var s=xmlDoc.getElementById("jklm_011").getElementsByTagName("answer").length;for(i=0;i<s;i++)respuestasCheckbox1[i]=xmlDoc.getElementById("jklm_011").getElementsByTagName("answer")[i].innerHTML;var y=xmlDoc.getElementsByTagName("title")[11].innerHTML;ponerDatosInputHtml3(y),respCorrecta3=xmlDoc.getElementsByTagName("answer")[13].innerHTML;var B=xmlDoc.getElementsByTagName("title")[12].innerHTML,a="/questions/question[@id='jklm_013']/option",M=xmlDoc.evaluate(a,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosSelectHtml1(B,M),respuestaSelect1=parseInt(xmlDoc.getElementsByTagName("answer")[14].innerHTML)}function corregirText(){var e=formElement.elements[0].value;e==respCorrecta?(darRespuestaHtml("P1: Exacto!"),nota+=1):darRespuestaHtml("P1: Te has equivocado");var t=xmlDoc.createElement("useranswer");t.innerHTML=e,xmlDoc.getElementById("jklm_001").appendChild(t)}function corregirSelect(){var e=formElement.elements[1];e.selectedIndex-1==respuestaSelect?(darRespuestaHtml("P2: Correcto"),nota+=1):darRespuestaHtml("P2: Incorrecto");var t=xmlDoc.createElement("useranswer");t.innerHTML=e.selectedIndex,xmlDoc.getElementById("jklm_002").appendChild(t)}function corregirCheckbox(){var e=formElement,t=[];for(i=0;i<e.historia.length;i++)if(e.historia[i].checked){var n=xmlDoc.createElement("useranswer");for(n.innerHTML=i+1,xmlDoc.getElementById("jklm_003").appendChild(n),t[i]=!1,j=0;j<respuestasCheckbox.length;j++)i==respuestasCheckbox[j]&&(t[i]=!0)}for(i=0;i<e.historia.length;i++)e.historia[i].checked&&(t[i]?(nota+=1/respuestasCheckbox.length,darRespuestaHtml("P3: posicion "+i+" correcta")):(nota-=1/respuestasCheckbox.length,darRespuestaHtml("P3: posicion "+i+" incorrecta")))}function corregirRadio(){var e=formElement,t=[];for(i=0;i<e.historia1.length;i++)if(e.historia1[i].checked){var n=xmlDoc.createElement("useranswer");for(n.innerHTML=i+1,xmlDoc.getElementById("jklm_004").appendChild(n),t[i]=!1,j=0;j<respuestaRadio.length;j++)i==respuestaRadio[j]&&(t[i]=!0)}for(i=0;i<e.historia1.length;i++)e.historia1[i].checked&&(t[i]?(nota+=1/respuestaRadio.length,darRespuestaHtml("P4: posicion "+i+" correcta")):(nota-=1/respuestaRadio.length,darRespuestaHtml("P4: posicion "+i+" incorrecta")))}function corregirMultiple(){var e=formElement,t=[],n=0;for(x=new Boolean(!1),i=0;i<e.mul.length;i++)if(e.mul[i].selected){var a=xmlDoc.createElement("useranswer");for(a.innerHTML=i+1,xmlDoc.getElementById("jklm_005").appendChild(a),t[i]=!1,j=0;j<respuestasMultiple.length;j++)i==respuestasMultiple[j]?(t[i]=!0,n+=1,x=!0):(n-=1,x=!1)}for(i=0;i<e.mul.length;i++)e.mul[i].selected&&(t[i]?(nota+=1/respuestasMultiple.length,darRespuestaHtml("P5 posicion "+i+" correcta")):(nota-=1/respuestasMultiple.length,darRespuestaHtml("P5: posicion "+i+" incorrecta")));darRespuestaHtml(x&&n>=2?"Tiene todas las opciones correctas seleccionadas. Respuesta correcta":"Tiene la respuesta incorrecta")}function corregirRadio1(){var e=formElement,t=[];for(i=0;i<e.historia2.length;i++)if(e.historia2[i].checked){var n=xmlDoc.createElement("useranswer");for(n.innerHTML=i+1,xmlDoc.getElementById("jklm_006").appendChild(n),t[i]=!1,j=0;j<respuestaRadio1.length;j++)i==respuestaRadio1[j]&&(t[i]=!0)}for(i=0;i<e.historia2.length;i++)e.historia2[i].checked&&(t[i]?(nota+=1/respuestaRadio1.length,darRespuestaHtml("P6: posicion "+i+" correcta")):(nota-=1/respuestaRadio1.length,darRespuestaHtml("P6: posicion "+i+" incorrecta")))}function corregirRadio2(){var e=formElement,t=[];for(i=0;i<e.historia3.length;i++)if(e.historia3[i].checked){var n=xmlDoc.createElement("useranswer");for(n.innerHTML=i+1,xmlDoc.getElementById("jklm_007").appendChild(n),t[i]=!1,j=0;j<respuestaRadio2.length;j++)i==respuestaRadio2[j]&&(t[i]=!0)}for(i=0;i<e.historia3.length;i++)e.historia3[i].checked&&(t[i]?(nota+=1/respuestaRadio2.length,darRespuestaHtml("P7: posicion "+i+" correcta")):(nota-=1/respuestaRadio2.length,darRespuestaHtml("P7: posicion "+i+" incorrecta")))}function corregirText1(){var e=formElement.elements[17].value;e==respCorrecta1?(darRespuestaHtml("P8: Exacto!"),nota+=1):darRespuestaHtml("P8: Te has equivocado");var t=xmlDoc.createElement("useranswer");t.innerHTML=s,xmlDoc.getElementById("jklm_008").appendChild(t)}function corregirText2(){var e=formElement.elements[18].value;e==respCorrecta2?(darRespuestaHtml("P9: Exacto!"),nota+=1):darRespuestaHtml("P9: Te has equivocado");var t=xmlDoc.createElement("useranswer");t.innerHTML=s,xmlDoc.getElementById("jklm_009").appendChild(t)}function corregirMultiple1(){var e=formElement,t=[],n=0;for(x=new Boolean(!1),i=0;i<e.mul1.length;i++)if(e.mul1[i].selected){var a=xmlDoc.createElement("useranswer");for(a.innerHTML=i+1,xmlDoc.getElementById("jklm_010").appendChild(a),t[i]=!1,j=0;j<respuestasMultiple1.length;j++)i==respuestasMultiple1[j]?(t[i]=!0,n+=1,x=!0):(n-=1,x=!1)}for(i=0;i<e.mul1.length;i++)e.mul1[i].selected&&(t[i]?(nota+=1/respuestasMultiple1.length,darRespuestaHtml("P10 posicion "+i+" correcta")):(nota-=1/respuestasMultiple1.length,darRespuestaHtml("P10: posicion "+i+" incorrecta")));darRespuestaHtml(x&&n>=2?"Tiene todas las opciones correctas seleccionadas. Respuesta correcta":"Tienes la respuesta incorrecta")}function corregirCheckbox1(){var e=formElement,t=[];for(i=0;i<e.historia4.length;i++)if(e.historia4[i].checked){var n=xmlDoc.createElement("useranswer");for(n.innerHTML=i+1,xmlDoc.getElementById("jklm_011").appendChild(n),t[i]=!1,j=0;j<respuestasCheckbox1.length;j++)i==respuestasCheckbox1[j]&&(t[i]=!0)}for(i=0;i<e.historia4.length;i++)e.historia4[i].checked&&(t[i]?(nota+=1/respuestasCheckbox1.length,darRespuestaHtml("P11: posicion "+i+" correcta")):(nota-=1/respuestasCheckbox1.length,darRespuestaHtml("P11: posicion "+i+" incorrecta")))}function corregirText3(){var e=formElement.elements[23].value;e==respCorrecta3?(darRespuestaHtml("P12: Exacto!"),nota+=1):darRespuestaHtml("P12: Te has equivocado");var t=xmlDoc.createElement("useranswer");t.innerHTML=s,xmlDoc.getElementById("jklm_012").appendChild(t)}function corregirSelect1(){var e=formElement.elements[24];e.selectedIndex-1==respuestaSelect1?(darRespuestaHtml("P13: Correcto"),nota+=1):darRespuestaHtml("P13: Incorrecto");var t=xmlDoc.createElement("useranswer");t.innerHTML=sel.selectedIndex,xmlDoc.getElementById("jklm_013").appendChild(t)}function ponerDatosInputHtml(e){document.getElementById("tituloInput").innerHTML=e}function ponerDatosSelectHtml(e,t){document.getElementById("tituloSelect").innerHTML=e;var n=document.getElementsByTagName("select")[0],a=t.iterateNext();for(i=0;a;){var r=document.createElement("option");r.text=a.innerHTML,r.value=i+1,i++,n.options.add(r),a=t.iterateNext()}}function ponerDatosCheckboxHtml(e,t){var n=document.getElementById("checkboxDiv");document.getElementById("tituloCheckbox").innerHTML=e;var a=t.iterateNext();for(i=0;a;){var r=document.createElement("input"),o=document.createElement("label");o.innerHTML=a.innerHTML,o.setAttribute("for","historia_"+i),r.type="checkbox",r.name="historia",r.id="historia_"+i,i++,n.appendChild(r),n.appendChild(o),n.appendChild(document.createElement("br")),a=t.iterateNext()}}function ponerDatosRadioHtml(e,t){var n=document.getElementById("radioDiv");document.getElementById("tituloRadio").innerHTML=e;var a=t.iterateNext();for(i=0;a;){var r=document.createElement("input"),o=document.createElement("label");o.innerHTML=a.innerHTML,o.setAttribute("for","historia1_"+i),r.type="radio",r.name="historia1",r.id="historia1_"+i,i++,n.appendChild(r),n.appendChild(o),n.appendChild(document.createElement("br")),a=t.iterateNext()}}function ponerDatosMultipleHtml(e,t){document.getElementById("tituloMultiple").innerHTML=e;var n=document.getElementsByTagName("select")[1],a=t.iterateNext();for(i=0;a;){var r=document.createElement("option");r.text=a.innerHTML,r.value=i+1,i++,n.options.add(r),a=t.iterateNext()}}function ponerDatosRadioHtml1(e,t){var n=document.getElementById("radioDiv1");document.getElementById("tituloRadio1").innerHTML=e;var a=t.iterateNext();for(i=0;a;){var r=document.createElement("input"),o=document.createElement("label");o.innerHTML=a.innerHTML,o.setAttribute("for","historia2_"+i),r.type="radio",r.name="historia2",r.id="historia2_"+i,i++,n.appendChild(r),n.appendChild(o),n.appendChild(document.createElement("br")),a=t.iterateNext()}}function ponerDatosRadioHtml2(e,t){var n=document.getElementById("radioDiv2");document.getElementById("tituloRadio2").innerHTML=e;var a=t.iterateNext();for(i=0;a;){var r=document.createElement("input"),o=document.createElement("label");o.innerHTML=a.innerHTML,o.setAttribute("for","historia3_"+i),r.type="radio",r.name="historia3",r.id="historia3_"+i,i++,n.appendChild(r),n.appendChild(o),n.appendChild(document.createElement("br")),a=t.iterateNext()}}function ponerDatosInputHtml1(e){document.getElementById("tituloInput1").innerHTML=e}function ponerDatosInputHtml2(e){document.getElementById("tituloInput2").innerHTML=e}function ponerDatosMultipleHtml1(e,t){document.getElementById("tituloMultiple1").innerHTML=e;var n=document.getElementsByTagName("select")[2],a=t.iterateNext();for(i=0;a;){var r=document.createElement("option");r.text=a.innerHTML,r.value=i+1,i++,n.options.add(r),a=t.iterateNext()}}function ponerDatosCheckboxHtml1(e,t){var n=document.getElementById("checkboxDiv1");document.getElementById("tituloCheckbox1").innerHTML=e;var a=t.iterateNext();for(i=0;a;){var r=document.createElement("input"),o=document.createElement("label");o.innerHTML=a.innerHTML,o.setAttribute("for","historia4_"+i),r.type="checkbox",r.name="historia4",r.id="historia4_"+i,i++,n.appendChild(r),n.appendChild(o),n.appendChild(document.createElement("br")),a=t.iterateNext()}}function ponerDatosInputHtml3(e){document.getElementById("tituloInput3").innerHTML=e}function ponerDatosSelectHtml1(e,t){document.getElementById("tituloSelect1").innerHTML=e;var n=document.getElementsByTagName("select")[3],a=t.iterateNext();for(i=0;a;){var r=document.createElement("option");r.text=a.innerHTML,r.value=i+1,i++,n.options.add(r),a=t.iterateNext()}}function darRespuestaHtml(e){var t=document.createElement("p"),n=document.createTextNode(e);t.appendChild(n),document.getElementById("resultadosDiv").appendChild(t)}function presentarNota(){document.getElementById("resultadosDiv").style.display="block",document.implementation&&document.implementation.createDocument&&(xsltProcessor=new XSLTProcessor,xsltProcessor.importStylesheet(xslDoc),resultDocument=xsltProcessor.transformToFragment(xmlDoc,document),document.getElementById("resultadosDiv").appendChild(resultDocument)),darRespuestaHtml("Nota: "+nota+" puntos sobre 13");for(var e=formElement,t=e.elements,n=0,i=t.length;i>n;++n)t[n].disabled=!0}function inicializar(){document.getElementById("resultadosDiv").innerHTML="",nota=0}function comprobar(){var e=formElement,t=!1,n=!1,a=0,r=!1,o=!1,l=0,s=!1;for(i=0;i<e.historia.length;i++)e.historia[i].checked&&(t=!0);for(i=0;i<e.historia1.length;i++)e.historia1[i].checked&&(n=!0);for(i=0;i<e.mul.length;i++)e.mul[i].checked&&a++;for(i=0;i<e.historia2.length;i++)e.historia2[i].checked&&(r=!0);for(i=0;i<e.historia3.length;i++)e.historia3[i].checked&&(o=!0);for(i=0;i<e.mul1.length;i++)e.mul1[i].checked&&l++;for(i=0;i<e.historia4.length;i++)e.historia4[i].checked&&(s=!0);return""==e.elements[0].value?(e.elements[0].focus(),alert("Escribe una respuesta"),!1):0==e.elements[1].selectedIndex?(e.elements[1].focus(),alert("Selecciona una opción"),!1):t?n?(a=0)?(document.getElementsByTagName("h3")[4].scrollIntoView(),alert("Selecciona una opción o más"),!1):r?o?""==e.elements[17].value?(e.elements[17].focus(),alert("Escribe una respuesta"),!1):""==e.elements[18].value?(e.elements[18].focus(),alert("Escribe una respuesta"),!1):(l=0)?(document.getElementsByTagName("h3")[9].scrollIntoView(),alert("Selecciona una opción o más"),!1):s?""==e.elements[23].value?(e.elements[23].focus(),alert("Escribe una respuesta"),!1):0==e.elements[24].selectedIndex?(e.elements[24].focus(),alert("Selecciona una opción"),!1):!0:(document.getElementsByTagName("h3")[10].scrollIntoView(),alert("Selecciona una opción del checkbox"),!1):(document.getElementsByTagName("h3")[6].scrollIntoView(),alert("Selecciona una opción del radio"),!1):(document.getElementsByTagName("h3")[5].scrollIntoView(),alert("Selecciona una opción del radio"),!1):(document.getElementsByTagName("h3")[3].scrollIntoView(),alert("Selecciona una opción del radio"),!1):(document.getElementsByTagName("h3")[2].scrollIntoView(),alert("Selecciona una opción del checkbox"),!1)}var formElement=null,respCorrecta=null,respCorrecta1=null,respCorrecta2=null,respCorrecta3=null,respuestaSelect=null,respuestaSelect1=null,respuestasCheckbox=[],respuestasCheckbox1=[],respuestaRadio=[],respuestaRadio1=[],respuestaRadio2=[],respuestasMultiple=[],respuestasMultiple1=[],nota=0,xmlDoc=null,xslDoc=null;window.onload=function(){formElement=document.getElementById("myform"),formElement.onsubmit=function(){return inicializar(),comprobar()&&(corregirText(),corregirSelect(),corregirCheckbox(),corregirRadio(),corregirMultiple(),corregirRadio1(),corregirRadio2(),corregirText1(),corregirText2(),corregirMultiple1(),corregirCheckbox1(),corregirText3(),corregirSelect1(),presentarNota()),!1};var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&gestionarXml(this)},e.open("GET","xml/questions.xml",!0),e.send();var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(xslDoc=this.responseXML)},t.open("GET","xml/questions.xsl",!0),t.send()};
